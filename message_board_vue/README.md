# ç•™è¨€æ¿ç³»ç»Ÿ - å‰ç«¯åº”ç”¨

è¿™æ˜¯ç•™è¨€æ¿ç³»ç»Ÿçš„å‰ç«¯åº”ç”¨ï¼ŒåŸºäº Vue 3 + TypeScript æ„å»ºçš„ç°ä»£åŒ–å•é¡µåº”ç”¨ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ç”¨æˆ·åŠŸèƒ½
- âœ… ç”¨æˆ·æ³¨å†Œä¸ç™»å½•ï¼ˆJWT è®¤è¯ï¼‰
- âœ… ç•™è¨€å‘å¸ƒä¸ç®¡ç†
- âœ… å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆæ”¯æŒè¡¨æƒ…ã€æ ¼å¼åŒ–ï¼‰
- âœ… ç•™è¨€å›å¤ï¼ˆæ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤ï¼‰
- âœ… ç•™è¨€ç‚¹èµï¼ˆç‚¹èµ/å–æ¶ˆç‚¹èµï¼‰
- âœ… ç”¨æˆ·ä¸ªäººä¸­å¿ƒ
  - ä¸ªäººä¿¡æ¯ç®¡ç†
  - å¤´åƒç®¡ç†
  - å¯†ç ä¿®æ”¹
  - æˆ‘çš„ç•™è¨€ç®¡ç†
  - æˆ‘çš„å›å¤ç®¡ç†

### ç®¡ç†å‘˜åŠŸèƒ½
- âœ… ç•™è¨€ç®¡ç†ï¼ˆæŸ¥çœ‹ã€åˆ é™¤æ‰€æœ‰ç•™è¨€ï¼‰
- âœ… å›å¤ç®¡ç†ï¼ˆæŸ¥çœ‹ã€åˆ é™¤æ‰€æœ‰å›å¤ï¼‰
- âœ… ç”¨æˆ·ç®¡ç†ï¼ˆæŸ¥çœ‹ã€ç¼–è¾‘ã€åˆ é™¤ç”¨æˆ·ï¼‰

### å…¶ä»–åŠŸèƒ½
- âœ… å“åº”å¼è®¾è®¡ï¼ˆæ”¯æŒç§»åŠ¨ç«¯ï¼‰
- âœ… æœç´¢åŠŸèƒ½
- âœ… åˆ†é¡µæ˜¾ç¤º
- âœ… æ•°æ®å®æ—¶æ›´æ–°
- âœ… è·¯ç”±å®ˆå«ï¼ˆæƒé™æ§åˆ¶ã€å‚æ•°éªŒè¯ï¼‰
- âœ… 404 é”™è¯¯é¡µé¢

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: Vue 3.5+ (Composition API)
- **è¯­è¨€**: TypeScript 5.9+
- **UI ç»„ä»¶åº“**: Element Plus 2.13+
- **æ ·å¼**: Tailwind CSS 4.1+
- **çŠ¶æ€ç®¡ç†**: Pinia 3.0+
- **è·¯ç”±**: Vue Router 4.6+
- **å¯Œæ–‡æœ¬ç¼–è¾‘å™¨**: WangEditor 5.1+
- **HTTP å®¢æˆ·ç«¯**: Axios 1.13+
- **æ—¥æœŸå¤„ç†**: Day.js 1.11+
- **å›¾æ ‡åº“**: 
  - Element Plus Icons
  - Heroicons
- **æ„å»ºå·¥å…·**: Vite 7.3+
- **ä»£ç è§„èŒƒ**: ESLint 9.39+

## ğŸ“ é¡¹ç›®ç»“æ„

```
message_board_vue/
â”œâ”€â”€ public/                    # é™æ€èµ„æº
â”‚   â”œâ”€â”€ avatar.png            # é»˜è®¤å¤´åƒ
â”‚   â”œâ”€â”€ favicon.ico           # ç½‘ç«™å›¾æ ‡
â”‚   â””â”€â”€ logo.svg              # Logo
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/                  # API æ¥å£å°è£…
â”‚   â”‚   â”œâ”€â”€ user.ts           # ç”¨æˆ·ç›¸å…³ API
â”‚   â”‚   â””â”€â”€ message.ts         # ç•™è¨€ç›¸å…³ API
â”‚   â”œâ”€â”€ assets/               # èµ„æºæ–‡ä»¶
â”‚   â”œâ”€â”€ components/           # ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ base/             # åŸºç¡€ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ ChatListItem.vue  # èŠå¤©åˆ—è¡¨é¡¹
â”‚   â”‚   â””â”€â”€ layout/           # å¸ƒå±€ç»„ä»¶
â”‚   â”‚       â”œâ”€â”€ Chat.vue      # å¯Œæ–‡æœ¬ç¼–è¾‘å™¨
â”‚   â”‚       â”œâ”€â”€ ChatList.vue  # ç•™è¨€åˆ—è¡¨
â”‚   â”‚       â”œâ”€â”€ Login.vue    # ç™»å½•ç»„ä»¶
â”‚   â”‚       â”œâ”€â”€ Navigation.vue # å¯¼èˆªæ 
â”‚   â”‚       â”œâ”€â”€ Regiest.vue  # æ³¨å†Œç»„ä»¶
â”‚   â”‚       â””â”€â”€ Search.vue    # æœç´¢ç»„ä»¶
â”‚   â”œâ”€â”€ config/               # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ emoji.ts          # è¡¨æƒ…é…ç½®
â”‚   â”‚   â”œâ”€â”€ manage.ts         # ç®¡ç†é¡µé¢é…ç½®
â”‚   â”‚   â””â”€â”€ navigation.ts     # å¯¼èˆªé…ç½®
â”‚   â”œâ”€â”€ directive/            # è‡ªå®šä¹‰æŒ‡ä»¤
â”‚   â”‚   â”œâ”€â”€ index.ts          # æŒ‡ä»¤å…¥å£
â”‚   â”‚   â””â”€â”€ modules/
â”‚   â”‚       â””â”€â”€ vReplay.ts    # å›å¤æŒ‡ä»¤
â”‚   â”œâ”€â”€ router/               # è·¯ç”±é…ç½®
â”‚   â”‚   â””â”€â”€ index.ts          # è·¯ç”±å®šä¹‰ï¼ˆåŒ…å«è·¯ç”±å®ˆå«ï¼‰
â”‚   â”œâ”€â”€ stores/               # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ index.ts          # Store å…¥å£
â”‚   â”‚   â””â”€â”€ modules/
â”‚   â”‚       â”œâ”€â”€ message.ts    # ç•™è¨€çŠ¶æ€ç®¡ç†
â”‚   â”‚       â””â”€â”€ user.ts       # ç”¨æˆ·çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ types/                # TypeScript ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ chat.d.ts         # èŠå¤©ç›¸å…³ç±»å‹
â”‚   â”‚   â”œâ”€â”€ message.d.ts      # ç•™è¨€ç›¸å…³ç±»å‹
â”‚   â”‚   â””â”€â”€ user.d.ts         # ç”¨æˆ·ç›¸å…³ç±»å‹
â”‚   â”œâ”€â”€ utils/                # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ dayJs.ts          # æ—¥æœŸå¤„ç†
â”‚   â”‚   â”œâ”€â”€ localtion.ts      # ä½ç½®ç›¸å…³
â”‚   â”‚   â”œâ”€â”€ overflow.ts       # æº¢å‡ºå¤„ç†
â”‚   â”‚   â”œâ”€â”€ request.ts        # HTTP è¯·æ±‚å°è£…
â”‚   â”‚   â”œâ”€â”€ saveToken.ts      # Token å­˜å‚¨
â”‚   â”‚   â””â”€â”€ setSession.ts     # Session è®¾ç½®
â”‚   â”œâ”€â”€ views/                # é¡µé¢è§†å›¾
â”‚   â”‚   â”œâ”€â”€ manage/           # ç®¡ç†é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ MessageManage.vue  # ç•™è¨€ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ RemarkManage.vue   # å›å¤ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ UserManage.vue      # ç”¨æˆ·ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ user/             # ç”¨æˆ·é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ AvatarManage.vue   # å¤´åƒç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ ChangePassword.vue  # ä¿®æ”¹å¯†ç 
â”‚   â”‚   â”‚   â”œâ”€â”€ MessageManage.vue   # æˆ‘çš„ç•™è¨€
â”‚   â”‚   â”‚   â”œâ”€â”€ Profile.vue         # ä¸ªäººèµ„æ–™
â”‚   â”‚   â”‚   â””â”€â”€ RemarkView.vue       # æˆ‘çš„å›å¤
â”‚   â”‚   â”œâ”€â”€ AuthView.vue      # è®¤è¯é¡µé¢ï¼ˆç™»å½•/æ³¨å†Œï¼‰
â”‚   â”‚   â”œâ”€â”€ HomeView.vue      # é¦–é¡µ
â”‚   â”‚   â”œâ”€â”€ ManageView.vue    # ç®¡ç†é¡µé¢å®¹å™¨
â”‚   â”‚   â”œâ”€â”€ MessageView.vue   # ç•™è¨€è¯¦æƒ…é¡µ
â”‚   â”‚   â”œâ”€â”€ NotFound.vue      # 404 é”™è¯¯é¡µé¢
â”‚   â”‚   â”œâ”€â”€ PlanView.vue      # å¼€å‘è®¡åˆ’é¡µé¢
â”‚   â”‚   â”œâ”€â”€ Setview.vue       # è®¾ç½®é¡µé¢
â”‚   â”‚   â””â”€â”€ UserView.vue      # ç”¨æˆ·ä¸­å¿ƒå®¹å™¨
â”‚   â”œâ”€â”€ App.vue               # æ ¹ç»„ä»¶
â”‚   â”œâ”€â”€ App.css               # å…¨å±€æ ·å¼
â”‚   â””â”€â”€ main.ts               # åº”ç”¨å…¥å£
â”œâ”€â”€ .eslintrc.ts              # ESLint é…ç½®
â”œâ”€â”€ env.d.ts                  # ç¯å¢ƒç±»å‹å®šä¹‰
â”œâ”€â”€ index.html                # HTML æ¨¡æ¿
â”œâ”€â”€ package.json              # ä¾èµ–é…ç½®
â”œâ”€â”€ tsconfig.json             # TypeScript é…ç½®ï¼ˆä¸»é…ç½®ï¼‰
â”œâ”€â”€ tsconfig.app.json         # TypeScript é…ç½®ï¼ˆåº”ç”¨ï¼‰
â”œâ”€â”€ tsconfig.node.json        # TypeScript é…ç½®ï¼ˆNodeï¼‰
â””â”€â”€ vite.config.ts            # Vite é…ç½®
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 20.19.0 æˆ– >= 22.12.0
- pnpm >= 10.14.0

### å®‰è£…ä¾èµ–

```bash
pnpm install
```

### å¼€å‘ç¯å¢ƒé…ç½®

å¼€å‘ç¯å¢ƒå·²é…ç½®ä»£ç†ï¼Œå°† `/api` è¯·æ±‚ä»£ç†åˆ°åç«¯æœåŠ¡ `http://localhost:3000`ã€‚

å¦‚éœ€ä¿®æ”¹ä»£ç†é…ç½®ï¼Œè¯·ç¼–è¾‘ `vite.config.ts`ï¼š

```typescript
server: {
  proxy: {
    "/api": {
      target: "http://localhost:3000",  // åç«¯æœåŠ¡åœ°å€
      changeOrigin: true,
      rewrite: (path) => path.replace(/^\/api/, ""),
    },
  },
}
```

### å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
pnpm dev
```

åº”ç”¨å°†åœ¨ `http://localhost:5173` å¯åŠ¨ã€‚

### ç±»å‹æ£€æŸ¥

```bash
pnpm type-check
```

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
pnpm build
```

æ„å»ºäº§ç‰©å°†è¾“å‡ºåˆ° `dist/` ç›®å½•ã€‚

### é¢„è§ˆç”Ÿäº§æ„å»º

```bash
pnpm preview
```

## ğŸ—ºï¸ è·¯ç”±è¯´æ˜

### è·¯ç”±åˆ—è¡¨

- `/` - é¦–é¡µï¼ˆç•™è¨€åˆ—è¡¨å’Œå‘å¸ƒï¼‰
- `/auth/:tab` - è®¤è¯é¡µé¢ï¼ˆç™»å½•/æ³¨å†Œï¼‰
- `/message/:id/:reply?` - ç•™è¨€è¯¦æƒ…é¡µï¼ˆ`id` å¿…å¡«ï¼Œ`reply` å¯é€‰ï¼‰
- `/plan` - å¼€å‘è®¡åˆ’é¡µé¢
- `/user/:id` - ç”¨æˆ·ä¸­å¿ƒï¼ˆé‡å®šå‘åˆ° `/user/:id/messages`ï¼‰
  - `/user/:id/messages` - æˆ‘çš„ç•™è¨€
  - `/user/:id/remarks` - æˆ‘çš„å›å¤
  - `/user/:id/avatar` - å¤´åƒç®¡ç†
  - `/user/:id/profile` - ä¸ªäººèµ„æ–™
  - `/user/:id/password` - ä¿®æ”¹å¯†ç 
- `/manage` - ç®¡ç†é¡µé¢ï¼ˆä»…ç®¡ç†å‘˜ï¼Œé‡å®šå‘åˆ° `/manage/messages`ï¼‰
  - `/manage/messages` - ç•™è¨€ç®¡ç†
  - `/manage/remarks` - å›å¤ç®¡ç†
  - `/manage/users` - ç”¨æˆ·ç®¡ç†
- `/:pathMatch(.*)*` - 404 é”™è¯¯é¡µé¢

### è·¯ç”±å®ˆå«

ç³»ç»Ÿå®ç°äº†è·¯ç”±å®ˆå«æœºåˆ¶ï¼Œç¡®ä¿é¡µé¢è®¿é—®çš„å®‰å…¨æ€§ï¼š

1. **`/message/:id` è·¯ç”±ä¿æŠ¤**
   - å¿…é¡»æä¾›æœ‰æ•ˆçš„ `id` å‚æ•°
   - ç¼ºå°‘ `id` æ—¶å°†é‡å®šå‘åˆ°é¦–é¡µå¹¶æ˜¾ç¤ºé”™è¯¯æç¤º

2. **`/manage/*` è·¯ç”±ä¿æŠ¤**
   - ä»…ç®¡ç†å‘˜ï¼ˆ`role === "admin"`ï¼‰å¯ä»¥è®¿é—®
   - éç®¡ç†å‘˜è®¿é—®å°†è¢«é‡å®šå‘åˆ°é¦–é¡µå¹¶æç¤ºæƒé™ä¸è¶³

3. **404 é¡µé¢**
   - è®¿é—®ä¸å­˜åœ¨çš„è·¯ç”±æ—¶æ˜¾ç¤ºå‹å¥½çš„ 404 é”™è¯¯é¡µé¢
   - æä¾›è¿”å›é¦–é¡µå’Œè¿”å›ä¸Šä¸€é¡µçš„é€‰é¡¹

## ğŸ“¦ çŠ¶æ€ç®¡ç†

ä½¿ç”¨ Pinia è¿›è¡ŒçŠ¶æ€ç®¡ç†ï¼ŒåŒ…å«ä»¥ä¸‹æ¨¡å—ï¼š

### User Store (`stores/modules/user.ts`)

ç®¡ç†ç”¨æˆ·ç›¸å…³çŠ¶æ€ï¼š
- `token` - JWT ä»¤ç‰Œ
- `userInfo` - ç”¨æˆ·ä¿¡æ¯
- `loading` - åŠ è½½çŠ¶æ€

ä¸»è¦æ–¹æ³•ï¼š
- `initUserStore()` - åˆå§‹åŒ–ç”¨æˆ·æ•°æ®
- `login()` - ç”¨æˆ·ç™»å½•
- `register()` - ç”¨æˆ·æ³¨å†Œ
- `queryUserInfo()` - æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯
- `updateUserInfo()` - æ›´æ–°ç”¨æˆ·ä¿¡æ¯
- `updatePassword()` - ä¿®æ”¹å¯†ç 
- `updateAvatar()` - æ›´æ–°å¤´åƒ
- `logout()` - é€€å‡ºç™»å½•

### Message Store (`stores/modules/message.ts`)

ç®¡ç†ç•™è¨€ç›¸å…³çŠ¶æ€ï¼š
- `messageList` - ç•™è¨€åˆ—è¡¨
- `loading` - åŠ è½½çŠ¶æ€

ä¸»è¦æ–¹æ³•ï¼š
- `queryMessage()` - æŸ¥è¯¢ç•™è¨€åˆ—è¡¨
- `sendMessage()` - å‘é€ç•™è¨€
- `deleteMessage()` - åˆ é™¤ç•™è¨€
- ç­‰...

## ğŸ”§ å¼€å‘å·¥å…·

### æ¨è IDE è®¾ç½®

- [VS Code](https://code.visualstudio.com/) + [Vue (Official)](https://marketplace.visualstudio.com/items?itemName=Vue.volar)ï¼ˆç¦ç”¨ Veturï¼‰

### æ¨èæµè§ˆå™¨æ‰©å±•

**Chromium æµè§ˆå™¨ï¼ˆChromeã€Edgeã€Brave ç­‰ï¼‰**:
- [Vue.js devtools](https://chromewebstore.google.com/detail/vuejs-devtools/nhdogjmejiglipccpnnnanhbledajbpd)
- [åœ¨ Chrome DevTools ä¸­å¯ç”¨è‡ªå®šä¹‰å¯¹è±¡æ ¼å¼åŒ–å™¨](http://bit.ly/object-formatters)

**Firefox**:
- [Vue.js devtools](https://addons.mozilla.org/en-US/firefox/addon/vue-js-devtools/)
- [åœ¨ Firefox DevTools ä¸­å¯ç”¨è‡ªå®šä¹‰å¯¹è±¡æ ¼å¼åŒ–å™¨](https://fxdx.dev/firefox-devtools-custom-object-formatters/)

### TypeScript æ”¯æŒ

TypeScript æ— æ³•é»˜è®¤å¤„ç† `.vue` å¯¼å…¥çš„ç±»å‹ä¿¡æ¯ï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨ `vue-tsc` æ›¿ä»£ `tsc` CLI è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚åœ¨ç¼–è¾‘å™¨ä¸­ï¼Œéœ€è¦ [Volar](https://marketplace.visualstudio.com/items?itemName=Vue.volar) æ¥è®© TypeScript è¯­è¨€æœåŠ¡è¯†åˆ« `.vue` ç±»å‹ã€‚

## ğŸ“ å¼€å‘è§„èŒƒ

### ä»£ç é£æ ¼

- ä½¿ç”¨ ESLint è¿›è¡Œä»£ç æ£€æŸ¥
- éµå¾ª Vue 3 Composition API æœ€ä½³å®è·µ
- ä½¿ç”¨ TypeScript è¿›è¡Œç±»å‹å®šä¹‰
- ç»„ä»¶ä½¿ç”¨ `<script setup>` è¯­æ³•

### æ–‡ä»¶å‘½å

- ç»„ä»¶æ–‡ä»¶ä½¿ç”¨ PascalCaseï¼š`UserProfile.vue`
- å·¥å…·æ–‡ä»¶ä½¿ç”¨ camelCaseï¼š`saveToken.ts`
- ç±»å‹å®šä¹‰æ–‡ä»¶ä½¿ç”¨ `.d.ts` åç¼€ï¼š`user.d.ts`

### ç›®å½•ç»“æ„

- `api/` - API æ¥å£å°è£…
- `components/` - å¯å¤ç”¨ç»„ä»¶
- `views/` - é¡µé¢çº§ç»„ä»¶
- `stores/` - çŠ¶æ€ç®¡ç†
- `utils/` - å·¥å…·å‡½æ•°
- `types/` - ç±»å‹å®šä¹‰

## ğŸ”— ç›¸å…³é“¾æ¥

- [Vue 3 æ–‡æ¡£](https://vuejs.org/)
- [TypeScript æ–‡æ¡£](https://www.typescriptlang.org/)
- [Element Plus æ–‡æ¡£](https://element-plus.org/)
- [Tailwind CSS æ–‡æ¡£](https://tailwindcss.com/)
- [Pinia æ–‡æ¡£](https://pinia.vuejs.org/)
- [Vue Router æ–‡æ¡£](https://router.vuejs.org/)
- [Vite æ–‡æ¡£](https://vite.dev/)

## ğŸ“„ è®¸å¯è¯

ISC
